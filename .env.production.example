# EAM Platform Production Environment Configuration
# Copy this file to .env and configure for your production environment
# IMPORTANT: Never commit .env files with real secrets to version control

# =============================================================================
# REQUIRED - Must be set before deployment
# =============================================================================

# JWT Configuration - MUST generate secure values
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=GENERATE_A_SECURE_64_BYTE_SECRET_HERE
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# Encryption Key for MFA secrets - MUST generate secure value
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ENCRYPTION_KEY=GENERATE_A_SECURE_32_BYTE_SECRET_HERE

# Database Configuration - Use strong passwords in production
DB_HOST=your-postgres-host.example.com
DB_PORT=5432
POSTGRES_USER=hubblewave
POSTGRES_PASSWORD=USE_A_STRONG_PASSWORD_HERE
POSTGRES_DB=hubblewave

# =============================================================================
# SERVICE CONFIGURATION
# =============================================================================

# Service Ports (adjust based on your deployment)
PORT_IDENTITY=3000
PORT_METADATA=3002
PORT_DATA=3001

# Redis Configuration
REDIS_HOST=your-redis-host.example.com
REDIS_PORT=6379
REDIS_PASSWORD=USE_A_STRONG_PASSWORD_HERE

# MinIO / S3 Configuration
MINIO_ENDPOINT=your-minio-host.example.com
MINIO_PORT=9000
MINIO_ROOT_USER=minio_admin
MINIO_ROOT_PASSWORD=USE_A_STRONG_PASSWORD_HERE
MINIO_USE_SSL=true

# TypeSense Configuration
TYPESENSE_HOST=your-typesense-host.example.com
TYPESENSE_PORT=8108
TYPESENSE_API_KEY=USE_A_STRONG_API_KEY_HERE
TYPESENSE_PROTOCOL=https

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# CORS Configuration - List your production frontend domains
CORS_ORIGINS=https://app.yourdomain.com,https://admin.yourdomain.com
CORS_ALLOWED_HEADERS=Content-Type, Authorization, X-Requested-With, Accept, Origin, X-Tenant-Slug

# Cookie Security - MUST be secure in production
USE_REFRESH_TOKEN_COOKIE=true
REFRESH_COOKIE_SAMESITE=strict
REFRESH_COOKIE_PATH=/
REFRESH_COOKIE_SECURE=true
REFRESH_COOKIE_DOMAIN=.yourdomain.com

# Account Security
MAX_FAILED_LOGIN_ATTEMPTS=5
ACCOUNT_LOCKOUT_DURATION_MINUTES=30

# Rate Limiting
RATE_LIMIT_TTL=60
RATE_LIMIT_MAX=100

# =============================================================================
# TENANCY CONFIGURATION
# =============================================================================

# Multi-tenancy settings
DEFAULT_TENANT_SLUG=
ALLOW_DEFAULT_TENANT_FALLBACK=false

# =============================================================================
# LOGGING & MONITORING
# =============================================================================

# Node Environment
NODE_ENV=production

# Log Level (error, warn, info, debug)
LOG_LEVEL=info

# Enable structured JSON logging for production
LOG_FORMAT=json

# =============================================================================
# OPTIONAL - External Services
# =============================================================================

# Email Service (SMTP)
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USER=your-smtp-user
# SMTP_PASSWORD=your-smtp-password
# SMTP_FROM=noreply@yourdomain.com

# LDAP/Active Directory Integration
# LDAP_URL=ldap://ldap.yourdomain.com:389
# LDAP_BIND_DN=cn=admin,dc=yourdomain,dc=com
# LDAP_BIND_PASSWORD=your-ldap-password
# LDAP_SEARCH_BASE=dc=yourdomain,dc=com

# OAuth/OIDC Configuration
# OIDC_ISSUER=https://auth.yourdomain.com
# OIDC_CLIENT_ID=your-client-id
# OIDC_CLIENT_SECRET=your-client-secret

# =============================================================================
# NOTES
# =============================================================================
#
# 1. All passwords and secrets should be unique and randomly generated
# 2. Use environment-specific configuration management (Vault, AWS Secrets Manager, etc.)
# 3. Enable SSL/TLS for all database and service connections
# 4. Review and restrict CORS_ORIGINS to only your actual frontend domains
# 5. Consider using connection pooling for database connections (PgBouncer)
# 6. Set up proper backup and disaster recovery for databases
# 7. Configure monitoring and alerting for all services
